import React from'react'
import { connect } from 'react-redux'
import * as R from 'ramda'

import {
    getBasketPhonesWithCount,getTotalBasketPrice
} from 'reducers/selectors'
import s from './basket.module.css'

const Basket = ({phones,totalPrice})=> {
    const isBasketEmpty = R.isEmpty(phones)

    const renderContent = () => (
        <div className={s.container}>
                <div >
                    {isBasketEmpty && <div> Your shopping cart is empty </div>}
                </div>
                                
                    {phones.map((phone, index)=>
                   <div className={s.phone}>
                       <div className={s.img}><img src={phone.image}
                        alt={phone.name}
                        style={{width:'150px'}}
                       /> </div>
                       <div className={s.name}> {phone.name} </div>
                       <div className={s.price}> ${phone.price} </div>
                       <div className={s.count}> {phone.count}шт </div>
                     </div>
                    )}
             
                <div className ={s.total}>
                    {R.not(isBasketEmpty)&&
                    <div>
                        <b>Total:</b> 
                        ${totalPrice}   
                     </div>
                    }
                </div>
        </div>
    )

    const renderSidebar = () => (
        <div ></div>
    )

    return (
        <div className={s.wrapp}>
            <div className={s.content}>{renderContent()}</div>
            <div className={s.sidebar}>{renderSidebar()}</div>
        </div>
    )
}
const mapStateToProps = (state) => {
    return {
        phones: getBasketPhonesWithCount(state),
        totalPrice: getTotalBasketPrice(state)
    }
}

export default connect(mapStateToProps, null ) (Basket)